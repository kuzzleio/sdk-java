language: java
os: linux
sudo: required
services:
  - docker
jdk:
  - oraclejdk8
  - oraclejdk9
  - openjdk8
go:
  - "1.11"
before_install:
  - sudo sysctl -w vm.max_map_count=262144
  - wget https://dl.google.com/go/go1.11.linux-amd64.tar.gz
  - sudo tar -C /usr/local -zxf go1.11.linux-amd64.tar.gz
env:
  - PATH=$PATH:/usr/local/go/bin
script:
  - PATH=$PATH:/usr/local/go/bin make
  - .ci/start_kuzzle.sh
  - cd features/java
  - gradle cucumber